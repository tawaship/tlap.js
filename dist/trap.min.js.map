{"version":3,"file":"trap.min.js","sources":["../node_modules/ismobilejs/esm/isMobile.js","../src/Application.ts","../node_modules/@tawaship/emitter/dist/Emitter.esm.js","../node_modules/@tawaship/task/dist/Task.esm.js","../src/DisplayObject.ts","../src/Object2D.ts","../src/Object3D.ts","../src/Container2D.ts","../src/Container3D.ts","../src/View.ts","../src/OIMO.ts","../src/PhysicsView.ts","../src/BodyPosition.ts","../src/BodyRotation.ts","../src/PhysicsObject3D.ts","../src/Anchor.ts","../src/Sprite.ts","../src/Mesh.ts","../src/Camera.ts"],"sourcesContent":["var appleIphone = /iPhone/i;\nvar appleIpod = /iPod/i;\nvar appleTablet = /iPad/i;\nvar appleUniversal = /\\biOS-universal(?:.+)Mac\\b/i;\nvar androidPhone = /\\bAndroid(?:.+)Mobile\\b/i;\nvar androidTablet = /Android/i;\nvar amazonPhone = /(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i;\nvar amazonTablet = /Silk/i;\nvar windowsPhone = /Windows Phone/i;\nvar windowsTablet = /\\bWindows(?:.+)ARM\\b/i;\nvar otherBlackBerry = /BlackBerry/i;\nvar otherBlackBerry10 = /BB10/i;\nvar otherOpera = /Opera Mini/i;\nvar otherChrome = /\\b(CriOS|Chrome)(?:.+)Mobile/i;\nvar otherFirefox = /Mobile(?:.+)Firefox\\b/i;\nvar isAppleTabletOnIos13 = function (navigator) {\n    return (typeof navigator !== 'undefined' &&\n        navigator.platform === 'MacIntel' &&\n        typeof navigator.maxTouchPoints === 'number' &&\n        navigator.maxTouchPoints > 1 &&\n        typeof MSStream === 'undefined');\n};\nfunction createMatch(userAgent) {\n    return function (regex) { return regex.test(userAgent); };\n}\nexport default function isMobile(param) {\n    var nav = {\n        userAgent: '',\n        platform: '',\n        maxTouchPoints: 0\n    };\n    if (!param && typeof navigator !== 'undefined') {\n        nav = {\n            userAgent: navigator.userAgent,\n            platform: navigator.platform,\n            maxTouchPoints: navigator.maxTouchPoints || 0\n        };\n    }\n    else if (typeof param === 'string') {\n        nav.userAgent = param;\n    }\n    else if (param && param.userAgent) {\n        nav = {\n            userAgent: param.userAgent,\n            platform: param.platform,\n            maxTouchPoints: param.maxTouchPoints || 0\n        };\n    }\n    var userAgent = nav.userAgent;\n    var tmp = userAgent.split('[FBAN');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    tmp = userAgent.split('Twitter');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    var match = createMatch(userAgent);\n    var result = {\n        apple: {\n            phone: match(appleIphone) && !match(windowsPhone),\n            ipod: match(appleIpod),\n            tablet: !match(appleIphone) &&\n                (match(appleTablet) || isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone),\n            universal: match(appleUniversal),\n            device: (match(appleIphone) ||\n                match(appleIpod) ||\n                match(appleTablet) ||\n                match(appleUniversal) ||\n                isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone)\n        },\n        amazon: {\n            phone: match(amazonPhone),\n            tablet: !match(amazonPhone) && match(amazonTablet),\n            device: match(amazonPhone) || match(amazonTablet)\n        },\n        android: {\n            phone: (!match(windowsPhone) && match(amazonPhone)) ||\n                (!match(windowsPhone) && match(androidPhone)),\n            tablet: !match(windowsPhone) &&\n                !match(amazonPhone) &&\n                !match(androidPhone) &&\n                (match(amazonTablet) || match(androidTablet)),\n            device: (!match(windowsPhone) &&\n                (match(amazonPhone) ||\n                    match(amazonTablet) ||\n                    match(androidPhone) ||\n                    match(androidTablet))) ||\n                match(/\\bokhttp\\b/i)\n        },\n        windows: {\n            phone: match(windowsPhone),\n            tablet: match(windowsTablet),\n            device: match(windowsPhone) || match(windowsTablet)\n        },\n        other: {\n            blackberry: match(otherBlackBerry),\n            blackberry10: match(otherBlackBerry10),\n            opera: match(otherOpera),\n            firefox: match(otherFirefox),\n            chrome: match(otherChrome),\n            device: match(otherBlackBerry) ||\n                match(otherBlackBerry10) ||\n                match(otherOpera) ||\n                match(otherFirefox) ||\n                match(otherChrome)\n        },\n        any: false,\n        phone: false,\n        tablet: false\n    };\n    result.any =\n        result.apple.device ||\n            result.android.device ||\n            result.windows.device ||\n            result.other.device;\n    result.phone =\n        result.apple.phone || result.android.phone || result.windows.phone;\n    result.tablet =\n        result.apple.tablet || result.android.tablet || result.windows.tablet;\n    return result;\n}\n//# sourceMappingURL=isMobile.js.map","import * as THREE from 'three';\r\nimport isMobile from 'ismobilejs';\r\nimport { View } from './View';\r\nimport { DisplayObject, IInteractionEvent, ITickerData } from './DisplayObject';\r\n\r\nexport interface IApplicationOption {\r\n\tcanvas?: HTMLCanvasElement;\r\n\tcontainer?: HTMLElement;\r\n\twidth?: number;\r\n\theight?: number;\r\n\ttransparent?: boolean;\r\n\tresolution?: number;\r\n\tbackgroundColor?: number;\r\n\tantialias?: boolean;\r\n\tautoAdjust?: TAutoAdjust;\r\n}\r\n\r\nexport interface IAdjustDelegate {\r\n\t(app: Application): void;\r\n}\r\n\r\nexport type TAutoAdjust = boolean | IAdjustDelegate;\r\n\r\nexport interface IAutoAdjustDelegate {\r\n\t(): void;\r\n}\r\n\r\nexport type TAutoAdjuster = IAutoAdjustDelegate | null;\r\n\r\nexport interface ISize {\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface IPosition {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nexport interface IHorizontal {\r\n\tx: number;\r\n\twidth: number;\r\n}\r\n\r\nexport interface IVertical {\r\n\ty: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface IRect extends ISize, IPosition {}\r\n\r\nexport class Application {\r\n\tprivate _container: HTMLElement;\r\n\tprivate _renderer: THREE.WebGLRenderer;\r\n\tprivate _views: View[] = [];\r\n\tprivate _lastTime: number = 0;\r\n\tprivate _playing: boolean = false;\r\n\tprivate _rendererSize: THREE.Vector2;\r\n\tprivate _autoAdjuster: TAutoAdjuster = null;\r\n\t\r\n\tinteractionDown: boolean = true;\r\n\tinteractionMove: boolean = false;\r\n\tinteractionUp: boolean = true;\r\n\t\r\n\tconstructor(options: IApplicationOption = {}) {\r\n\t\tconst canvas = options.canvas || undefined;\r\n\t\tconst container = options.container || document.body;\r\n\t\tconst transparent = options.transparent || false;\r\n\t\tconst antialias = options.antialias || false;\r\n\t\tconst rendererOptions = {\r\n\t\t\tcanvas, alpha: transparent, antialias\r\n\t\t}\r\n\t\t\r\n\t\tconst renderer = new THREE.WebGLRenderer(rendererOptions);\r\n\t\t\r\n\t\tconst width = options.width || 600;\r\n\t\tconst height = options.height || 400;\r\n\t\tconst resolution = options.resolution || 1;\r\n\t\tconst backgroundColor = options.backgroundColor || 0;\r\n\t\tconst opacity = transparent ? 0 : 1;\r\n\t\tconst autoAdjust = options.autoAdjust || false;\r\n\t\t\r\n\t\trenderer.setClearColor(backgroundColor, 0);\r\n\t\trenderer.setSize(width, height);\r\n\t\trenderer.setPixelRatio(resolution);\r\n\t\trenderer.autoClear = false;\r\n\t\t\r\n\t\tthis._container = container;\r\n\t\tthis._renderer = renderer;\r\n\t\tthis._rendererSize = new THREE.Vector2(width, height);\r\n\t\t\r\n\t\tconst dom = renderer.domElement;\r\n\t\tdom.style.position = 'absolute';\r\n\t\tconst isSP = isMobile(navigator.userAgent).any;\r\n\t\t\r\n\t\tconst raycaster = new THREE.Raycaster();\r\n\t\tconst mouse = new THREE.Vector2();\r\n\t\tconst event: IInteractionEvent = { type: '', emitted: [], originalEvent: null };\r\n\t\tlet down: DisplayObject[] = [];\r\n\t\tlet over: DisplayObject[] = [];\r\n\t\t\r\n\t\tconst cast = (e: Event, x: number, y: number) => {\r\n\t\t\tevent.originalEvent = e;\r\n\t\t\tevent.emitted = [];\r\n\t\t\t\r\n\t\t\tconst w = dom.offsetWidth;\r\n\t\t\tconst h = dom.offsetHeight;\r\n\t\t\t\r\n\t\t\tmouse.x = (x / w) * 2 - 1;\r\n\t\t\tmouse.y = -(y / h) * 2 + 1;\r\n\t\t\t\r\n\t\t\tconst c = this._views;\r\n\t\t\tfor (let i = c.length - 1; i >= 0; i--) {\r\n\t\t\t\tif (event.emitted.length > 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tc[i].onInteraction(event, raycaster, mouse);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tconst dispatch = (targets: DisplayObject[], type: string) => {\r\n\t\t\tfor (let i = 0; i < targets.length; i++) {\r\n\t\t\t\ttargets[i].emit(type, event);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tconst separate = (_first: DisplayObject[], _emitted: DisplayObject[]) => {\r\n\t\t\tconst first: DisplayObject[] = _first.concat([]);\r\n\t\t\tconst emitted: DisplayObject[] = _emitted.concat([]);\r\n\t\t\tconst both: DisplayObject[] = [];\r\n\t\t\t\r\n\t\t\tfor (let i = first.length - 1; i >= 0; i--) {\r\n\t\t\t\tconst p = first[i];\r\n\t\t\t\tconst index = emitted.indexOf(p);\r\n\t\t\t\t\r\n\t\t\t\tif (index > -1) {\r\n\t\t\t\t\tfirst.splice(i, 1);\r\n\t\t\t\t\temitted.splice(index, 1);\r\n\t\t\t\t\tboth.push(p);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn { both, first, emitted };\r\n\t\t}\r\n\t\t\r\n\t\tconst startHandler = (e: Event, x: number, y: number) => {\r\n\t\t\tdown = [];\r\n\t\t\tif (!this.interactionDown) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.type = 'system:interaction:pointerdown';\r\n\t\t\tcast(e, x, y);\r\n\t\t\t\r\n\t\t\tif (event.emitted.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdispatch(event.emitted, 'pointerdown');\r\n\t\t\tdown = event.emitted;\r\n\t\t};\r\n\t\t\r\n\t\tconst moveHandler = (e: Event, x: number, y: number) => {\r\n\t\t\tif (!this.interactionMove) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.type = 'system:interaction:pointermove';\r\n\t\t\tcast(e, x, y);\r\n\t\t\t\r\n\t\t\t// 開始がない\r\n\t\t\tif (over.length === 0) {\r\n\t\t\t\tif (event.emitted.length > 0) {\r\n\t\t\t\t\tdispatch(event.emitted, 'pointerover');\r\n\t\t\t\t\tover = event.emitted;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 開始はあるが乗っていない\r\n\t\t\tif (event.emitted.length === 0) {\r\n\t\t\t\tdispatch(over, 'pointerout');\r\n\t\t\t\tover = [];\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst saparated = separate(over, event.emitted);\r\n\t\t\t\r\n\t\t\t// 共にあるが一致していない\r\n\t\t\tdispatch(saparated.emitted, 'pointerover');\r\n\t\t\tdispatch(saparated.first, 'pointerout');\r\n\t\t\tover = event.emitted;\r\n\t\t\t\r\n\t\t\t// 共にあって一致\r\n\t\t\tdispatch(saparated.both, 'pointermove');\r\n\t\t}\r\n\t\t\r\n\t\tconst endHandler = (e: Event, x: number, y: number) => {\r\n\t\t\tif (!this.interactionUp) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.type = 'system:interaction:pointerup';\r\n\t\t\tcast(e, x, y);\r\n\t\t\t\r\n\t\t\t// 開始がない\r\n\t\t\tif (down.length === 0) {\r\n\t\t\t\tif (event.emitted.length > 0) {\r\n\t\t\t\t\tdispatch(event.emitted, 'pointerup');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 開始はあるが終了がない\r\n\t\t\tif (event.emitted.length === 0) {\r\n\t\t\t\tdispatch(down, 'pointerupoutside');\r\n\t\t\t\tdown = [];\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst saparated = separate(down, event.emitted);\r\n\t\t\t\r\n\t\t\t// 共にあるが一致していない\r\n\t\t\tdispatch(saparated.emitted, 'pointerup');\r\n\t\t\tdispatch(saparated.first, 'pointerupoutside');\r\n\t\t\t\r\n\t\t\t// 共にあって一致\r\n\t\t\tdispatch(saparated.both, 'pointerup');\r\n\t\t\tdispatch(saparated.both, 'pointertap');\r\n\t\t\tdown = [];\r\n\t\t}\r\n\t\t\r\n\t\tif (isSP) {\r\n\t\t\tdom.addEventListener('touchstart', e => {\r\n\t\t\t\tstartHandler(e, e.touches[0].clientX - dom.offsetLeft, e.touches[0].clientY - dom.offsetTop);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdom.addEventListener('touchmove', e => {\r\n\t\t\t\tmoveHandler(e, e.touches[0].clientX - dom.offsetLeft, e.touches[0].clientY - dom.offsetTop);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdom.addEventListener('touchend', e => {\r\n\t\t\t\tendHandler(e, e.changedTouches[0].clientX - dom.offsetLeft, e.changedTouches[0].clientY - dom.offsetTop);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdom.addEventListener('mousedown', e => {\r\n\t\t\t\tstartHandler(e, e.offsetX, e.offsetY);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdom.addEventListener('mousemove', e => {\r\n\t\t\t\tmoveHandler(e, e.offsetX, e.offsetY);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdom.addEventListener('mouseup', e => {\r\n\t\t\t\tendHandler(e, e.offsetX, e.offsetY);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\twindow.addEventListener('visibilitychange', e => {\r\n\t\t\tthis._lastTime = e.timeStamp;\r\n\t\t});\r\n\t\t\r\n\t\tconst step = (timestamp: number) => {\r\n\t\t\tconst delta = (timestamp - this._lastTime) * 0.06;\r\n\t\t\tthis._lastTime = timestamp;\r\n\t\t\t\r\n\t\t\tif (!this._playing) {\r\n\t\t\t\trequestAnimationFrame(step);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.update(delta);\r\n\t\t\trequestAnimationFrame(step);\r\n\t\t};\r\n\t\t\r\n\t\trequestAnimationFrame(step);\r\n\t\t\r\n\t\tif (autoAdjust) {\r\n\t\t\tif (autoAdjust === true) {\r\n\t\t\t\tthis.autoAdjuster = () => {\r\n\t\t\t\t\tthis.fullScreen()\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.autoAdjuster = () => {\r\n\t\t\t\t\tautoAdjust(this);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tget element() {\r\n\t\treturn this._renderer.domElement;\r\n\t}\r\n\t\r\n\tget width() {\r\n\t\treturn this._rendererSize.x;\r\n\t}\r\n\t\r\n\tget height() {\r\n\t\treturn this._rendererSize.y;\r\n\t}\r\n\t\r\n\taddView(view: View) {\r\n\t\tthis._views.push(view);\r\n\t\t\r\n\t\treturn view;\r\n\t}\r\n\t\r\n\tremoveView(view: View) {\r\n\t\tconst index = this._views.indexOf(view);\r\n\t\tif (index === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._views.splice(index, 1);\r\n\t\t\r\n\t\treturn view;\r\n\t}\r\n\t\r\n\tplay() {\r\n\t\tthis._container.appendChild(this._renderer.domElement);\r\n\t\t\r\n\t\tthis.start();\r\n\t}\r\n\t\r\n\tstart() {\r\n\t\tthis._playing = true;\r\n\t}\r\n\t\r\n\tstop() {\r\n\t\tthis._playing = false;\r\n\t}\r\n\t\r\n\tupdate(delta: number) {\r\n\t\tconst c = this._views;\r\n\t\tconst e: ITickerData = { delta };\r\n\t\t\r\n\t\tfor (let i = 0; i < c.length; i++) {\r\n\t\t\tc[i].update(e);\r\n\t\t}\r\n\t\t\r\n\t\tthis.render();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tthis._renderer.setViewport(0, 0, this._rendererSize.x, this._rendererSize.y);\r\n\t\tthis._renderer.clear();\r\n\t\t\r\n\t\tconst c = this._views;\r\n\t\tfor (let i = 0; i < c.length; i++) {\r\n\t\t\tc[i].render(this._renderer);\r\n\t\t}\r\n\t}\r\n\t\r\n\tget autoAdjuster() {\r\n\t\treturn this._autoAdjuster;\r\n\t}\r\n\t\r\n\tset autoAdjuster(autoAdjuster: TAutoAdjuster) {\r\n\t\tif (this._autoAdjuster) {\r\n\t\t\twindow.removeEventListener('resize', this._autoAdjuster);\r\n\t\t}\r\n\t\t\r\n\t\tif (!autoAdjuster) {\r\n\t\t\tthis._autoAdjuster = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._autoAdjuster = autoAdjuster;\r\n\t\twindow.addEventListener('resize', autoAdjuster);\r\n\t\tautoAdjuster();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resize canvas to fit specified rectangle.\r\n\t * \r\n\t * @param rect Rectangle to adjust.\r\n\t */\r\n\tfullScreen(rect?: IRect) {\r\n\t\tconst view: HTMLCanvasElement = this._renderer.domElement;\r\n\t\tconst r: IRect = rect || {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\twidth: this._container.offsetWidth || window.innerWidth,\r\n\t\t\theight: this._container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tif (r.width / r.height > view.width / view.height) {\r\n\t\t\treturn this.adjustHeight(r.height).toCenter(r).toTop(r);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.adjustWidth(r.width).toMiddle(r).toLeft(r);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resize canvas to fit specified width.\r\n\t * \r\n\t * @param width Width to adjust.\r\n\t */\r\n\tadjustWidth(width?: number) {\r\n\t\tconst view: HTMLCanvasElement = this._renderer.domElement;\r\n\t\tconst w: number = width || this._container.offsetWidth || window.innerWidth;\r\n\t\t\r\n\t\tconst h: number = w / view.width * view.height;\r\n\t\t\r\n\t\t//const frame = this._piximData.frame;\r\n\t\tview.style.width = `${w}px`;\r\n\t\tview.style.height = `${h}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resize canvas to fit specified height.\r\n\t * \r\n\t * @param height Height to adjust.\r\n\t */\r\n\tadjustHeight(height?: number) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst h: number = height || this._container.offsetHeight || window.innerHeight;\r\n\t\t\r\n\t\tconst w = h / view.height * view.width;\r\n\t\t\r\n\t\t//const frame = this._piximData.frame;\r\n\t\tview.style.height = `${h}px`;\r\n\t\tview.style.width = `${w}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Left justified with respect to the reference data.\r\n\t * \r\n\t * @param horizontal Horizontal data used to calculate the position.\r\n\t */\r\n\ttoLeft(horizontal?: IHorizontal) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\tx: 0,\r\n\t\t\twidth: this._container.offsetWidth || window.innerWidth\r\n\t\t};\r\n\t\t\r\n\t\tview.style.left = `${hol.x}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Center justified with respect to the reference data.\r\n\t * \r\n\t * @param horizontal Horizontal data used to calculate the position.\r\n\t */\r\n\ttoCenter(horizontal?: IHorizontal) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\tx: 0,\r\n\t\t\twidth: this._container.offsetWidth || window.innerWidth\r\n\t\t};\r\n\t\t\r\n\t\tview.style.left = `${(hol.width - this._getViewRect().width) / 2 + hol.x}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Right justified with respect to the reference data.\r\n\t * \r\n\t * @param horizontal Horizontal data used to calculate the position.\r\n\t */\r\n\ttoRight(horizontal?: IHorizontal) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\tx: 0,\r\n\t\t\twidth: this._container.offsetWidth || window.innerWidth\r\n\t\t};\r\n\t\t\r\n\t\tview.style.left = `${hol.width - this._getViewRect().width + hol.x}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Top justified with respect to the reference data.\r\n\t * \r\n\t * @param vertical Vertical data used to calculate the position.\r\n\t */\r\n\ttoTop(vertical?: IVertical) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst ver: IVertical = vertical || {\r\n\t\t\ty: 0,\r\n\t\t\theight: this._container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tview.style.top = `${ver.y}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Middle justified with respect to the reference data.\r\n\t * \r\n\t * @param vertical Vertical data used to calculate the position.\r\n\t */\r\n\ttoMiddle(vertical?: IVertical) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst ver: IVertical = vertical || {\r\n\t\t\ty: 0,\r\n\t\t\theight: this._container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tview.style.top = `${(ver.height - this._getViewRect().height) / 2 + ver.y}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Bottom justified with respect to the reference data.\r\n\t * \r\n\t * @param vertical Vertical data used to calculate the position.\r\n\t */\r\n\ttoBottom(vertical?: IVertical) {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\tconst ver: IVertical = vertical || {\r\n\t\t\ty: 0,\r\n\t\t\theight: this._container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tview.style.top = `${ver.height - this._getViewRect().height + ver.y}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tprivate _getViewRect(): IRect {\r\n\t\tconst view = this._renderer.domElement;\r\n\t\t\r\n\t\treturn {\r\n\t\t\tx: parseInt(view.style.left.replace('px', '')),\r\n\t\t\ty: parseInt(view.style.top.replace('px', '')),\r\n\t\t\twidth: parseInt(view.style.width.replace('px', '')),\r\n\t\t\theight: parseInt(view.style.height.replace('px', ''))\r\n\t\t};\r\n\t}\r\n}\r\n","/*!\n * @tawaship/emitter - v3.1.1\n * \n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nclass Emitter {\r\n    constructor() {\r\n        this._events = {};\r\n    }\r\n    _on(type, callback, once) {\r\n        if (!type || !callback) {\r\n            return this;\r\n        }\r\n        const events = this._events[type] = this._events[type] || [];\r\n        for (let i = 0; i < events.length; i++) {\r\n            if (events[i].callback === callback) {\r\n                return this;\r\n            }\r\n        }\r\n        events.push({ callback, once });\r\n        return this;\r\n    }\r\n    /**\r\n     * Register event.\r\n     *\r\n     * @param type Event type.\r\n     * @param callback Callback when the event fires.\r\n     */\r\n    on(type, callback) {\r\n        return this._on(type, callback, false);\r\n    }\r\n    /**\r\n     * Register one-time event.\r\n     *\r\n     * @param type Event type.\r\n     * @param callback Callback when the event fires.\r\n     */\r\n    once(type, callback) {\r\n        return this._on(type, callback, true);\r\n    }\r\n    /**\r\n     * Unregister event.\r\n     *\r\n     * @param type Event type.\r\n     * @param callback Registered callback.\r\n     */\r\n    off(type, callback) {\r\n        if (!type || !callback) {\r\n            return this;\r\n        }\r\n        const events = this._events[type] || [];\r\n        for (let i = 0; i < events.length; i++) {\r\n            if (events[i].callback === callback) {\r\n                events.splice(i, 1);\r\n                return this;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _emit(type, context, ...args) {\r\n        if (!type) {\r\n            return this;\r\n        }\r\n        const events = this._events[type] || [];\r\n        const targets = [];\r\n        for (let i = events.length - 1; i >= 0; i--) {\r\n            const event = events[i];\r\n            if (event.once) {\r\n                events.splice(i, 1);\r\n            }\r\n            targets.push(event);\r\n        }\r\n        for (let i = targets.length - 1; i >= 0; i--) {\r\n            targets[i].callback.apply(context, args);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Emit event.\r\n     *\r\n     * @param type Event type to emit.\r\n     * @param args Argument(s) in callback.\r\n     */\r\n    emit(type, ...args) {\r\n        return this._emit(type, this, ...args);\r\n    }\r\n    /**\r\n     * Emit event with specifying a context.\r\n     *\r\n     * @param type Event type to emit.\r\n     * @param context Context to execute the callback.\r\n     * @param args Argument(s) in callback.\r\n     */\r\n    cemit(type, context, ...args) {\r\n        return this._emit(type, context, ...args);\r\n    }\r\n    _emitAll(context, ...args) {\r\n        if (context == null) {\r\n            return this;\r\n        }\r\n        const targets = [];\r\n        for (let type in this._events) {\r\n            const events = this._events[type] || [];\r\n            for (let i = events.length - 1; i >= 0; i--) {\r\n                const event = events[i];\r\n                if (event.once) {\r\n                    events.splice(i, 1);\r\n                }\r\n                targets.push(event);\r\n            }\r\n        }\r\n        for (let i = targets.length - 1; i >= 0; i--) {\r\n            targets[i].callback.apply(context, args);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Emit all events.\r\n     *\r\n     * @param args Argument(s) in callback.\r\n     */\r\n    emitAll(...args) {\r\n        return this._emitAll(this, ...args);\r\n    }\r\n    /**\r\n     * Emit all events with specifying a context.\r\n     *\r\n     * @param context Context to execute the callback.\r\n     * @param args Argument(s) in callback.\r\n     */\r\n    cemitAll(context, ...args) {\r\n        return this._emitAll(context, ...args);\r\n    }\r\n    /**\r\n     * Remove events grouped event type.\r\n     *\r\n     * @param type Event type to remove. If it is empty, removes all events.\r\n     */\r\n    clear(type = '') {\r\n        if (type) {\r\n            delete (this._events[type]);\r\n        }\r\n        else {\r\n            this._events = {};\r\n        }\r\n        return this;\r\n    }\r\n}\n\nexport { Emitter };\n//# sourceMappingURL=Emitter.esm.js.map\n","/*!\n * @tawaship/task - v1.1.0\n * \n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nclass Task {\r\n    constructor(callbacks, context) {\r\n        this._taskData = {\r\n            context: context == null ? this : context,\r\n            enabled: true,\r\n            index: -1,\r\n            callbacks: [],\r\n            value: null\r\n        };\r\n        this.add(callbacks);\r\n    }\r\n    /**\r\n     * Whether the task works.\r\n     */\r\n    get enabled() {\r\n        return this._taskData.enabled;\r\n    }\r\n    set enabled(enabled) {\r\n        this._taskData.enabled = enabled;\r\n    }\r\n    /**\r\n     * Add the task to the end of the list.\r\n     */\r\n    add(callbacks) {\r\n        if (!Array.isArray(callbacks)) {\r\n            callbacks = [callbacks];\r\n        }\r\n        const list = this._taskData.callbacks;\r\n        const flag = list.length === 0;\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n            if (!(callbacks[i] instanceof Function)) {\r\n                continue;\r\n            }\r\n            list.push(callbacks[i]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Execute the current task.\r\n     */\r\n    done(...args) {\r\n        if (!this._taskData.enabled) {\r\n            return;\r\n        }\r\n        const task = this._taskData.callbacks[this._taskData.index];\r\n        if (!task) {\r\n            return;\r\n        }\r\n        return this._taskData.value = task.apply(this._taskData.context, args);\r\n    }\r\n    _to(index) {\r\n        this._taskData.index = Number(index);\r\n        return this;\r\n    }\r\n    /**\r\n     * Change the current task to the first task.\r\n     */\r\n    first() {\r\n        return this._to(0);\r\n    }\r\n    /**\r\n     * Change the current task to the previos task.\r\n     */\r\n    prev() {\r\n        return this._to(this._taskData.index - 1);\r\n    }\r\n    /**\r\n     * Change the current task to the next task.\r\n     */\r\n    next() {\r\n        return this._to(this._taskData.index + 1);\r\n    }\r\n    /**\r\n     * Change the current task to the specified task.\r\n     */\r\n    to(index) {\r\n        return this._to(index);\r\n    }\r\n    /**\r\n     * Skips all tasks and changes to the finished state.\r\n     */\r\n    finish() {\r\n        this._taskData.index = -1;\r\n        return this;\r\n    }\r\n    /**\r\n     * Cancel all task and leave them unregistered.\r\n     */\r\n    reset() {\r\n        this._taskData.callbacks = [];\r\n        this._taskData.index = -1;\r\n        this._taskData.value = null;\r\n        return this;\r\n    }\r\n    /**\r\n     * Destroy instance.\r\n     */\r\n    destroy() {\r\n        this.reset();\r\n    }\r\n    /**\r\n     * The value returned by the last task executed.\r\n     */\r\n    get value() {\r\n        return this._taskData.value;\r\n    }\r\n}\n\nexport { Task };\n//# sourceMappingURL=Task.esm.js.map\n","import * as THREE from 'three';\r\nimport { Emitter } from '@tawaship/emitter';\r\nimport { Task } from '@tawaship/task';\r\n\r\nexport interface IInteractionEvent extends THREE.Event {\r\n\ttype: string;\r\n\temitted: DisplayObject[];\r\n\toriginalEvent: Event | null;\r\n};\r\n\r\nexport interface ITickerData {\r\n\tdelta: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst _box = new THREE.Box3();\r\n\r\nexport abstract class DisplayObject<T extends THREE.Object3D = THREE.Object3D> extends Emitter {\r\n\tprotected _three: T;\r\n\tprotected _sub: T;\r\n\tprotected _size: THREE.Vector3 = new THREE.Vector3();\r\n\tprotected _pivot: THREE.Vector3 = new THREE.Vector3();\r\n\tprotected _children: DisplayObject[] = [];\r\n\tprotected _task: Task;\r\n\t\r\n\tinteractive: boolean = false;\r\n\t\r\n\tconstructor(three: T) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._three = this._sub = three;\r\n\t\t\r\n\t\tthree.addEventListener('system:interaction:pointerdown', event => {\r\n\t\t\tif (!this.interactive) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.emitted.push(this);\r\n\t\t});\r\n\t\t\r\n\t\tthree.addEventListener('system:interaction:pointerup', event => {\r\n\t\t\tif (!this.interactive) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.emitted.push(this);\r\n\t\t});\r\n\t\t\r\n\t\tthree.addEventListener('system:interaction:pointermove', event => {\r\n\t\t\tif (!this.interactive) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.emitted.push(this);\r\n\t\t});\r\n\t\t\r\n\t\tthree.addEventListener('system:interaction:pointerupoutside', event => {\r\n\t\t\tif (!this.interactive) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tevent.emitted.push(this);\r\n\t\t});\r\n\t\t\r\n\t\tthis._task = new Task([], this);\r\n\t\tthis._task.first();\r\n\t}\r\n\t\r\n\tget three() {\r\n\t\treturn this._three;\r\n\t}\r\n\t\r\n\tget task() {\r\n\t\treturn this._task;\r\n\t}\r\n\t\r\n\tget parent(): DisplayObject | null {\r\n\t\treturn this._three.userData.parent;\r\n\t}\r\n\t\r\n\tget children() {\r\n\t\treturn this._children;\r\n\t}\r\n\t\r\n\tupdateTask(e: ITickerData) {\r\n\t\tthis._task.done(e);\r\n\t}\r\n\t\r\n\tget width() {\r\n\t\tthis.updateBoundingBox();\r\n\t\treturn this._size.x;\r\n\t}\r\n\t\r\n\tget height() {\r\n\t\tthis.updateBoundingBox();\r\n\t\treturn this._size.y;\r\n\t}\r\n\t\r\n\tget depth() {\r\n\t\tthis.updateBoundingBox();\r\n\t\treturn this._size.z * this.scale.z;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._three.position.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._three.position.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._three.position.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._three.position.y = value;\r\n\t}\r\n\t\r\n\tget z() {\r\n\t\treturn this._three.position.z;\r\n\t}\r\n\t\r\n\tset z(value) {\r\n\t\tthis._three.position.z = value;\r\n\t}\r\n\t\r\n\t/*\r\n\tget position() {\r\n\t\treturn this._three.position;\r\n\t}\r\n\t*/\r\n\t\r\n\tget scale() {\r\n\t\treturn this._three.scale;\r\n\t}\r\n\t\r\n\tget pivot() {\r\n\t\treturn this._pivot;\r\n\t}\r\n\t\r\n\tupdate(e: ITickerData) {\r\n\t\tthis.updateTransform();\r\n\t\tthis.updateTask(e);\r\n\t\t\r\n\t\tconst c = this._children;\r\n\t\tfor (let i = 0; i < c.length; i++) {\r\n\t\t\tc[i].update(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tabstract updateTransform(): void;\r\n\t\r\n\tupdateBoundingBox() {\r\n\t\tthis.updateTransform();\r\n\t\t\r\n\t\tthis._three.remove(this._sub)\r\n\t\t_box.setFromObject(this._sub);\r\n\t\tthis._three.add(this._sub)\r\n\t\t_box.getSize(this._size);\r\n\t\tthis._size.multiply(this.scale);\r\n\t}\r\n\t\r\n\taddChild(object: DisplayObject) {\r\n\t\tif (object.parent) {\r\n\t\t\tobject.parent.removeChild(object);\r\n\t\t}\r\n\t\t\r\n\t\tthis._children.push(object);\r\n\t\tthis._sub.add(object.three);\r\n\t\tobject.three.userData.parent = this;\r\n\t\t\r\n\t\treturn object;\r\n\t}\r\n\t\r\n\tremoveChild(object: DisplayObject) {\r\n\t\tif (object.parent !== this) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst index = this._children.indexOf(object);\r\n\t\tif (index === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._children.splice(index, 1);\r\n\t\tthis._sub.remove(object.three);\r\n\t\tobject.three.userData.parent = null;\r\n\t\t\r\n\t\treturn object;\r\n\t}\r\n}\r\n","import * as THREE from 'three';\r\nimport { DisplayObject } from './DisplayObject';\r\n\r\nexport abstract class Object2D<T extends THREE.Object3D = THREE.Object3D> extends DisplayObject<T> {\r\n\tprotected _skew: THREE.Vector2 = new THREE.Vector2();\r\n\t\r\n\tconstructor(three: T) {\r\n\t\tsuper(three);\r\n\t\t\r\n\t\tthree.matrixAutoUpdate = false;\r\n\t}\r\n\t\r\n\tget skew() {\r\n\t\treturn this._skew;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._three.rotation.z;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._three.rotation.z = value;\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\tthis._updateMatrix();\r\n\t}\r\n\t\r\n\t_updateMatrix() {\r\n\t\tconst x = this.x;\r\n\t\tconst y = this.y;\r\n\t\tconst z = this._three.position.z;\r\n\t\tconst scaleX = this.scale.x;\r\n\t\tconst scaleY = this.scale.y;\r\n\t\tconst skewX = this.skew.x;\r\n\t\tconst skewY = this.skew.y;\r\n\t\tconst rotation = this.rotation;\r\n\t\tconst pivotX = this.pivot.x;\r\n\t\tconst pivotY = this.pivot.y;\r\n\t\t\r\n\t\tconst a = Math.cos(rotation + skewY) * scaleX;\r\n\t\tconst b = Math.sin(rotation + skewY) * scaleX;\r\n\t\tconst c = -Math.sin(rotation - skewX) * scaleY;\r\n\t\tconst d = Math.cos(rotation - skewX) * scaleY;\r\n\t\tconst tx = x - ((pivotX * a) + (pivotY * c));\r\n\t\tconst ty = y - ((pivotX * b) + (pivotY * d));\r\n\t\t\r\n\t\tthis._three.matrix.set(\r\n\t\t\ta, c, 0, tx, \r\n\t\t\tb, d, 0, ty,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { DisplayObject } from './DisplayObject';\r\n\r\nexport abstract class Object3D<T extends THREE.Object3D = THREE.Object3D> extends DisplayObject<T> {\r\n\tget rotation() {\r\n\t\treturn this._three.rotation;\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object2D } from './Object2D';\r\n\r\nexport class Container2D extends Object2D<THREE.Group> {\r\n\tconstructor() {\r\n\t\tsuper(new THREE.Group());\r\n\t\t\r\n\t\tthis._sub = new THREE.Group();\r\n\t\tthis._three.add(this._sub);\r\n\t}\r\n\t\r\n\t_updateOrder() {\r\n\t\tconst c = this._children;\r\n\t\tfor (let i = 0; i < c.length; i++) {\r\n\t\t\tc[i].three.position.z = i * 0.0000001;\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\tthis._updateMatrix();\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object3D } from './Object3D';\r\n\r\nexport class Container3D extends Object3D<THREE.Group> {\r\n\tconstructor() {\r\n\t\tsuper(new THREE.Group());\r\n\t\t\r\n\t\tthis._sub = new THREE.Group();\r\n\t\tthis._three.add(this._sub);\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\tthis._sub.position.x = -this._pivot.x;\r\n\t\tthis._sub.position.y = -this._pivot.y;\r\n\t\tthis._sub.position.z = -this._pivot.z;\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object3D } from './Object3D';\r\nimport { Camera } from './Camera';\r\nimport { IInteractionEvent, ITickerData } from './DisplayObject';\r\n\r\nexport class View extends Object3D<THREE.Scene> {\r\n\tprivate _cameras: Camera[] = [];\r\n\t\r\n\tconstructor() {\r\n\t\tsuper(new THREE.Scene());\r\n\t\t\r\n\t\tthis.interactive = true;\r\n\t}\r\n\t\r\n\tget scene() {\r\n\t\treturn this._three;\r\n\t}\r\n\t\r\n\taddCamera(camera: Camera) {\r\n\t\tif (camera.parent) {\r\n\t\t\tcamera.parent.removeChild(camera);\r\n\t\t}\r\n\t\t\r\n\t\tthis._cameras.push(camera);\r\n\t\tthis._three.add(camera.three);\r\n\t\tcamera.three.userData.parent = this;\r\n\t\t\r\n\t\treturn camera;\r\n\t}\r\n\t\r\n\tremoveCamera(camera: Camera) {\r\n\t\tif (camera.parent !== this) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst index = this._cameras.indexOf(camera);\r\n\t\tif (index === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._cameras.splice(index, 1);\r\n\t\tthis._three.remove(camera.three);\r\n\t\tcamera.three.userData.parent = null;\r\n\t\t\r\n\t\treturn camera;\r\n\t}\r\n\t\r\n\tadd(three: THREE.Object3D) {\r\n\t\tthis._three.add(three);\r\n\t\t\r\n\t\treturn three;\r\n\t}\r\n\t\r\n\tremove(three: THREE.Object3D) {\r\n\t\tthis._three.remove(three);\r\n\t\t\r\n\t\treturn three;\r\n\t}\r\n\t\r\n\tupdate(e: ITickerData) {\r\n\t\tthis.updateTask(e);\r\n\t\t\r\n\t\tconst c = this._children;\r\n\t\tfor (let i in this._children) {\r\n\t\t\tc[i].update(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\trender(renderer: THREE.WebGLRenderer) {\r\n\t\tconst c = this._cameras;\r\n\t\t\r\n\t\tfor (let i = 0; i < c.length; i++) {\r\n\t\t\trenderer.clearDepth();\r\n\t\t\tc[i].render(renderer, this._three);\r\n\t\t}\r\n\t}\r\n\t\r\n\tonInteraction(event: IInteractionEvent, raycaster: THREE.Raycaster, mouse: THREE.Vector2) {\r\n\t\tif (!this.interactive) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst c = this._cameras;\r\n\t\t\r\n\t\tfor (let i = 0; i < c.length; i++) {\r\n\t\t\tif (event.emitted.length > 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\traycaster.setFromCamera(mouse, c[i].camera);\r\n\t\t\t\r\n\t\t\tconst f: (p: THREE.Object3D) => THREE.Object3D[] = (p: THREE.Object3D) => {\r\n\t\t\t\treturn p.children.map(p => {\r\n\t\t\t\t\tif (p instanceof THREE.Mesh) {\r\n\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn f(p);\r\n\t\t\t\t}).flat();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst meshes = f(this._three);\r\n\t\t\t\r\n\t\t\tconst intersects = raycaster.intersectObjects(meshes);\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < intersects.length; i++) {\r\n\t\t\t\tif (event.emitted.length > 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet p = intersects[i].object;\r\n\t\t\t\twhile (p !== this._three) {\r\n\t\t\t\t\tp.dispatchEvent(event);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!p.parent) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tp = p.parent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\r\n\t}\r\n}\r\n","declare const OIMO: any;\r\n\r\nexport default OIMO;","import * as THREE from 'three';\r\nimport { View } from './View';\r\nimport { ITickerData } from './DisplayObject';\r\nimport { PhysicsObject3D } from './PhysicsObject3D';\r\nimport OIMO from './OIMO';\r\n\r\nexport class PhysicsView extends View {\r\n\tprivate _world: any;\r\n\tphysicsEnabled: boolean = true;\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._world = new OIMO.World();\r\n\t\tthis._world.setGravity(new OIMO.Vec3(0, -9.8, 0));\r\n\t}\r\n\t\r\n\tget world() {\r\n\t\treturn this._world;\r\n\t}\r\n\t\r\n\taddChild(object: PhysicsObject3D) {\r\n\t\tsuper.addChild(object);\r\n\t\t\r\n\t\tthis._world.addRigidBody(object.body);\r\n\t\t\r\n\t\treturn object;\r\n\t}\r\n\t\r\n\tremoveChild(object: PhysicsObject3D) {\r\n\t\tconst o = super.removeChild(object);\r\n\t\t\r\n\t\tif (!o) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._world.removeRigidBody(object.body);\r\n\t\t\r\n\t\treturn o;\r\n\t}\r\n\t\r\n\tupdate(e: ITickerData) {\r\n\t\tif (this.physicsEnabled) {\r\n\t\t\tthis._world.step(1 / 60);\r\n\t\t}\r\n\t\t\r\n\t\tthis.updateTask(e);\r\n\t\t\r\n\t\tconst c = this._children;\r\n\t\tfor (let i in this._children) {\r\n\t\t\tc[i].update(e);\r\n\t\t}\r\n\t}\r\n}\r\n","import { PhysicsObject3D } from './PhysicsObject3D';\r\n\r\nexport class BodyPosition {\r\n\tprivate _object: PhysicsObject3D;\r\n\t\r\n\tconstructor(object: PhysicsObject3D) {\r\n\t\tthis._object = object;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._object.body.getPosition().x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tconst position = this._object.body.getPosition();\r\n\t\tposition.x = value;\r\n\t\tthis._object.body.setPosition(position);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._object.body.getPosition().y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tconst position = this._object.body.getPosition();\r\n\t\tposition.y = value;\r\n\t\tthis._object.body.setPosition(position);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n\t\r\n\tget z() {\r\n\t\treturn this._object.body.getPosition().z;\r\n\t}\r\n\t\r\n\tset z(value) {\r\n\t\tconst position = this._object.body.getPosition();\r\n\t\tposition.z = value;\r\n\t\tthis._object.body.setPosition(position);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n\t\r\n\tset(x: number, y?: number, z?: number) {\r\n\t\tif (y === undefined) {\r\n\t\t\ty = x;\r\n\t\t}\r\n\t\t\r\n\t\tif (z === undefined) {\r\n\t\t\tz = y;\r\n\t\t}\r\n\t\t\r\n\t\tconst position = this._object.body.getPosition();\r\n\t\tposition.x = x;\r\n\t\tposition.y = y;\r\n\t\tposition.z = z;\r\n\t\t\r\n\t\tthis._object.body.setPosition(position);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n}","import { PhysicsObject3D } from './PhysicsObject3D';\r\n\r\nexport class BodyRotation {\r\n\tprivate _object: PhysicsObject3D;\r\n\t\r\n\tconstructor(object: PhysicsObject3D) {\r\n\t\tthis._object = object;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._object.body.getRotation().toEulerXyz().x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tconst rotation = this._object.body.getRotation().toEulerXyz();\r\n\t\trotation.x = value;\r\n\t\tthis._object.body.setRotationXyz(rotation);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._object.body.getRotation().toEulerXyz().y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tconst rotation = this._object.body.getRotation().toEulerXyz();\r\n\t\trotation.y = value;\r\n\t\tthis._object.body.setRotationXyz(rotation);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n\t\r\n\tget z() {\r\n\t\treturn this._object.body.getRotation().toEulerXyz().z;\r\n\t}\r\n\t\r\n\tset z(value) {\r\n\t\tconst rotation = this._object.body.getRotation().toEulerXyz();\r\n\t\trotation.z = value;\r\n\t\tthis._object.body.setRotationXyz(rotation);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n\t\r\n\tset(x: number, y?: number, z?: number) {\r\n\t\tif (y === undefined) {\r\n\t\t\ty = x;\r\n\t\t}\r\n\t\t\r\n\t\tif (z === undefined) {\r\n\t\t\tz = y;\r\n\t\t}\r\n\t\t\r\n\t\tconst rotation = this._object.body.getRotation().toEulerXyz();\r\n\t\trotation.x = x;\r\n\t\trotation.y = y;\r\n\t\trotation.z = z;\r\n\t\t\r\n\t\tthis._object.body.setRotationXyz(rotation);\r\n\t\tthis._object.updateTransform();\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object3D } from './Object3D';\r\nimport OIMO from './OIMO';\r\nimport { BodyPosition } from './BodyPosition';\r\nimport { BodyRotation } from './BodyRotation';\r\n\r\nexport class PhysicsObject3D extends Object3D<THREE.Object3D> {\r\n\tprivate _body: any;\r\n\tprivate _contantEnabled: boolean = false;\r\n\tprivate _position: BodyPosition;\r\n\tprivate _rotation: BodyRotation;\r\n\t\r\n\tconstructor(three: THREE.Object3D, body: any) {\r\n\t\tsuper(three);\r\n\t\t\r\n\t\tthis._body = body;\r\n\t\tthis._position = new BodyPosition(this);\r\n\t\tthis._rotation = new BodyRotation(this);\r\n\t\t\r\n\t\tbody.userData = {};\r\n\t\tbody.userData.ref = this;\r\n\t}\r\n\t\r\n\tget body() {\r\n\t\treturn this._body;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._position.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._position.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._position.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._position.y = value;\r\n\t}\r\n\t\r\n\tget z() {\r\n\t\treturn this._position.z;\r\n\t}\r\n\t\r\n\tset z(value) {\r\n\t\tthis._position.z = value;\r\n\t}\r\n\t\r\n\tget position() {\r\n\t\treturn this._position;\r\n\t}\r\n\t\r\n\t// @ts-ignore\r\n\tget rotation() {\r\n\t\treturn this._rotation;\r\n\t}\r\n\t\r\n\tget contactEnabled() {\r\n\t\treturn this._contantEnabled;\r\n\t}\r\n\t\r\n\tset contactEnabled(value) {\r\n\t\tthis._contantEnabled = value;\r\n\t\t\r\n\t\tif (!value) {\r\n\t\t\tlet shape = this._body.getShapeList();\r\n\t\t\twhile (shape) {\r\n\t\t\t\tshape.setContactCallback(null);\r\n\t\t\t\tshape = shape.getNext();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst callback = new OIMO.ContactCallback();\r\n\t\tconst event = { hit: null, originalEvent: null };\r\n\t\t\r\n\t\tcallback.beginContact = (e: any) => {\r\n\t\t\tevent.hit = e.getShape2().getRigidBody().userData.ref;\r\n\t\t\tevent.originalEvent = e;\r\n\t\t\tthis.emit('beginContact', event);\r\n\t\t};\r\n\t\tcallback.endContact = (e: any) => {\r\n\t\t\tevent.hit = e.getShape2().getRigidBody().userData.ref;\r\n\t\t\tevent.originalEvent = e;\r\n\t\t\tthis.emit('endContact', event);\r\n\t\t};\r\n\t\tcallback.preSolve = (e: any) => {\r\n\t\t\tevent.hit = e.getShape2().getRigidBody().userData.ref;\r\n\t\t\tevent.originalEvent = e;\r\n\t\t\tthis.emit('preSolve', event);\r\n\t\t};\r\n\t\tcallback.postSolve = (e: any) => {\r\n\t\t\tevent.hit = e.getShape2().getRigidBody().userData.ref;\r\n\t\t\tevent.originalEvent = e;\r\n\t\t\tthis.emit('postSolve', event);\r\n\t\t};\r\n\t\t\r\n\t\tlet shape = this._body.getShapeList();\r\n\t\twhile (shape) {\r\n\t\t\tshape.setContactCallback(callback);\r\n\t\t\tshape = shape.getNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\tthis._three.position.copy(this._body.getPosition());\r\n\t\tthis._three.quaternion.copy(this._body.getOrientation());\r\n\t}\r\n\t\r\n\tupdateBoundingBox() {\r\n\t\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { IMesh } from './IMesh';\r\n\r\nexport class Anchor {\r\n\tprivate _x: number;\r\n\tprivate _y: number;\r\n\tprivate _z: number;\r\n\tprivate _mesh: IMesh;\r\n\t\r\n\tconstructor(x: number, y: number, z: number, mesh: IMesh) {\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._mesh = mesh;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._x = value;\r\n\t\tthis._mesh.updateGeometryPosition();\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._y = value;\r\n\t\tthis._mesh.updateGeometryPosition();\r\n\t}\r\n\t\r\n\tget z() {\r\n\t\treturn this._z;\r\n\t}\r\n\t\r\n\tset z(value) {\r\n\t\tthis._z = value;\r\n\t\tthis._mesh.updateGeometryPosition();\r\n\t}\r\n\t\r\n\tset(x: number, y?: number, z?: number) {\r\n\t\tif (y === undefined) {\r\n\t\t\ty = x;\r\n\t\t}\r\n\t\t\r\n\t\tif (z === undefined) {\r\n\t\t\tz = y;\r\n\t\t}\r\n\t\t\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\t\r\n\t\tthis._mesh.updateGeometryPosition();\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object2D } from './Object2D';\r\nimport { Anchor } from './Anchor';\r\nimport { IMesh } from './IMesh'\r\n\r\nexport class Sprite extends Object2D<THREE.Mesh> implements IMesh {\r\n\tprivate _texture: THREE.Texture;\r\n\tprivate _anchor: Anchor;\r\n\tprivate _material: THREE.MeshBasicMaterial;\r\n\tprivate _width: number = 0;\r\n\tprivate _height: number = 0;\r\n\t\r\n\tconstructor(texture: THREE.Texture) {\r\n\t\tsuper(new THREE.Mesh());\r\n\t\t\r\n\t\tthis._anchor = new Anchor(0, 0, 0, this);\r\n\t\t\r\n\t\tthis._material = new THREE.MeshBasicMaterial();\r\n\t\tthis._material.transparent = true;\r\n\t\t\r\n\t\tthis._three.material = this._material;\r\n\t\t\r\n\t\tthis._texture = texture;\r\n\t\tthis.texture = texture;\r\n\t}\r\n\t\r\n\tget texture() {\r\n\t\treturn this._texture;\r\n\t}\r\n\t\r\n\tset texture(texture) {\r\n\t\tthis._texture = texture;\r\n\t\tthis._material.needsUpdate = true;\r\n\t\tthis._material.map = texture;\r\n\t\t\r\n\t\tif (texture && texture.image) {\r\n\t\t\tthis._updateGeometry(texture.image.width, texture.image.height);\r\n\t\t} else {\r\n\t\t\tthis._updateGeometry(0, 0);\r\n\t\t}\r\n\t}\r\n\t\r\n\tget anchor() {\r\n\t\treturn this._anchor;\r\n\t}\r\n\t\r\n\t_updateGeometry(width: number, height: number) {\r\n\t\tthis._three.geometry = new THREE.PlaneGeometry(width, height);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis.updateGeometryPosition();\r\n\t}\r\n\t\r\n\tupdateGeometryPosition() {\r\n\t\tthis._three.geometry.center();\r\n\t\tthis._three.geometry.translate(this._width * (0.5 - this._anchor.x), this._height * (0.5 - this._anchor.y), 0)\r\n\t}\r\n\t\r\n\tupdateBoundingBox() {\r\n\t\tthis._three.geometry.computeBoundingBox();\r\n\t\tthis._three.geometry.boundingBox && this._three.geometry.boundingBox.getSize(this._size);\r\n\t\tthis._size.multiply(this.scale);\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\t\r\n\t}\r\n\t\r\n\tstatic from(url: string, callback: (sprite: Sprite) => void) {\r\n\t\tconst sprite = new Sprite(new THREE.TextureLoader().load(url, texture => {\r\n\t\t\tsprite.texture = texture;\r\n\t\t\tcallback && callback(sprite);\r\n\t\t}));\r\n\t\t\r\n\t\treturn sprite;\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object3D } from './Object3D';\r\nimport { Anchor } from './Anchor';\r\nimport { IMesh } from './IMesh'\r\n\r\nexport class Mesh extends Object3D<THREE.Mesh> implements IMesh {\r\n\tprivate _anchor: Anchor;\r\n\t\r\n\tconstructor(geometry: THREE.BufferGeometry, material: THREE.Material) {\r\n\t\tsuper(new THREE.Mesh(geometry, material));\r\n\t\t\r\n\t\tthis._anchor = new Anchor(0, 0, 0, this);\r\n\t\tmaterial.transparent = true;\r\n\t\tthis.updateGeometryPosition();\r\n\t}\r\n\t\r\n\tget anchor() {\r\n\t\treturn this._anchor;\r\n\t}\r\n\t\r\n\tupdateGeometryPosition() {\r\n\t\tthis._three.geometry.center();\r\n\t\tthis.updateBoundingBox();\r\n\t\tthis._three.geometry.translate(this._size.x * (0.5 - this._anchor.x), this._size.y * (0.5 - this._anchor.y), this._size.z * (0.5 - this._anchor.z))\r\n\t}\r\n\t\r\n\tupdateBoundingBox() {\r\n\t\tthis._three.geometry.computeBoundingBox();\r\n\t\tthis._three.geometry.boundingBox && this._three.geometry.boundingBox.getSize(this._size);\r\n\t\tthis._size.multiply(this.scale);\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\t\r\n\t}\r\n}","import * as THREE from 'three';\r\nimport { Object3D } from './Object3D';\r\nimport { IRect } from './Application';\r\n\r\nexport class Camera extends Object3D<THREE.Camera> {\r\n\tprivate _viewport: IRect;\r\n\t\r\n\tconstructor(camera: THREE.Camera, viewport: IRect) {\r\n\t\tsuper(camera);\r\n\t\t\r\n\t\tthis._viewport = viewport;\r\n\t}\r\n\t\r\n\tget camera() {\r\n\t\treturn this._three;\r\n\t}\r\n\t\r\n\tget viewport() {\r\n\t\treturn this._viewport;\r\n\t}\r\n\t\r\n\trender(renderer: THREE.WebGLRenderer, scene: THREE.Scene) {\r\n\t\trenderer.setViewport(this._viewport.x, this._viewport.y, this._viewport.width, this._viewport.height);\r\n\t\trenderer.render(scene, this._three);\r\n\t}\r\n\t\r\n\tupdateTransform() {\r\n\t\r\n\t}\r\n\t\r\n\tupdateBoundingBox() {\r\n\t\r\n\t}\r\n}"],"names":["appleIphone","appleIpod","appleTablet","appleUniversal","androidPhone","androidTablet","amazonPhone","amazonTablet","windowsPhone","windowsTablet","otherBlackBerry","otherBlackBerry10","otherOpera","otherChrome","otherFirefox","isAppleTabletOnIos13","navigator","platform","maxTouchPoints","MSStream","Application","options","this","const","canvas","undefined","container","document","body","rendererOptions","alpha","transparent","antialias","renderer","THREE.WebGLRenderer","width","height","resolution","backgroundColor","autoAdjust","setClearColor","setSize","setPixelRatio","autoClear","_container","_renderer","_rendererSize","THREE.Vector2","dom","domElement","style","position","isSP","param","nav","userAgent","tmp","split","match","regex","test","createMatch","result","apple","phone","ipod","tablet","universal","device","amazon","android","windows","other","blackberry","blackberry10","opera","firefox","chrome","any","isMobile","raycaster","THREE.Raycaster","mouse","event","type","emitted","originalEvent","down","over","cast","e","x","y","w","offsetWidth","h","offsetHeight","c","_views","i","length","onInteraction","dispatch","targets","let","emit","separate","_first","_emitted","first","concat","both","p","index","indexOf","splice","push","startHandler","interactionDown","moveHandler","interactionMove","saparated","endHandler","interactionUp","addEventListener","touches","clientX","offsetLeft","clientY","offsetTop","changedTouches","offsetX","offsetY","window","_lastTime","timeStamp","step","timestamp","delta","_playing","update","requestAnimationFrame","autoAdjuster","fullScreen","prototypeAccessors","element","addView","view","removeView","play","appendChild","start","stop","render","setViewport","clear","_autoAdjuster","removeEventListener","rect","r","innerWidth","innerHeight","adjustHeight","toCenter","toTop","adjustWidth","toMiddle","toLeft","horizontal","hol","left","_getViewRect","toRight","vertical","ver","top","toBottom","parseInt","replace","Emitter","_events","_on","callback","once","events","on","off","_emit","context","apply","args","cemit","_emitAll","emitAll","cemitAll","Task","callbacks","_taskData","enabled","value","add","Array","isArray","list","Function","done","task","_to","Number","prev","next","to","finish","reset","destroy","_box","THREE.Box3","DisplayObject","three","super","THREE.Vector3","_three","_sub","interactive","_task","parent","userData","children","_children","updateTask","updateBoundingBox","_size","depth","z","scale","pivot","_pivot","updateTransform","remove","setFromObject","getSize","multiply","addChild","object","removeChild","Object2D","matrixAutoUpdate","skew","_skew","rotation","_updateMatrix","scaleX","scaleY","skewX","skewY","pivotX","pivotY","a","Math","cos","b","sin","d","tx","ty","matrix","set","Object3D","Container2D","THREE.Group","_updateOrder","Container3D","View","THREE.Scene","scene","addCamera","camera","_cameras","removeCamera","clearDepth","setFromCamera","f","map","THREE.Mesh","flat","meshes","intersects","intersectObjects","dispatchEvent","OIMO","PhysicsView","_world","World","setGravity","Vec3","world","addRigidBody","o","removeRigidBody","physicsEnabled","BodyPosition","_object","getPosition","setPosition","BodyRotation","getRotation","toEulerXyz","setRotationXyz","PhysicsObject3D","_body","_position","_rotation","ref","contactEnabled","_contantEnabled","ContactCallback","hit","beginContact","getShape2","getRigidBody","endContact","preSolve","postSolve","shape","getShapeList","setContactCallback","getNext","copy","quaternion","getOrientation","Anchor","mesh","_x","_y","_z","_mesh","updateGeometryPosition","Sprite","texture","_anchor","_material","THREE.MeshBasicMaterial","material","_texture","needsUpdate","image","_updateGeometry","anchor","geometry","THREE.PlaneGeometry","_width","_height","center","translate","computeBoundingBox","boundingBox","from","url","sprite","THREE.TextureLoader","load","Mesh","Camera","viewport","_viewport"],"mappings":"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"}
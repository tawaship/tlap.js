/*!
 * tlap.js - v1.0.0
 * 
 * @require three.js v0.127.0
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,e,i){"use strict";var n=function(t,e,i,n){this._x=t,this._y=e,this._z=i,this._mesh=n},o={x:{configurable:!0},y:{configurable:!0},z:{configurable:!0}};o.x.get=function(){return this._x},o.x.set=function(t){this._x=t,this._mesh.updateGeometryPosition()},o.y.get=function(){return this._y},o.y.set=function(t){this._y=t,this._mesh.updateGeometryPosition()},o.z.get=function(){return this._z},o.z.set=function(t){this._z=t,this._mesh.updateGeometryPosition()},n.prototype.set=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=e),this._x=t,this._y=e,this._z=i,this._mesh.updateGeometryPosition()},Object.defineProperties(n.prototype,o);var r=/iPhone/i,s=/iPod/i,a=/iPad/i,h=/\biOS-universal(?:.+)Mac\b/i,u=/\bAndroid(?:.+)Mobile\b/i,c=/Android/i,p=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,f=/Windows Phone/i,l=/\bWindows(?:.+)ARM\b/i,_=/BlackBerry/i,y=/BB10/i,g=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i,m=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};var w=function(t){var i=this;void 0===t&&(t={}),this._views=[],this._lastTime=0,this._playing=!1,this._autoAdjuster=null,this._basepath="",this._version="",this.interactionDown=!0,this.interactionMove=!1,this.interactionUp=!0;var n=t.canvas||void 0,o=t.container||document.body,w={canvas:n,alpha:t.transparent||!1,antialias:t.antialias||!1},x=new e.WebGLRenderer(w),j=t.width||600,z=t.height||400,P=t.resolution||1,E=t.backgroundColor||0,T=t.autoAdjust||!1,k=t.basepath||"./",A=t.version||"";x.setClearColor(E,0),x.setSize(j,z),x.setPixelRatio(P),x.autoClear=!1,this._container=o,this._renderer=x,this._rendererSize=new e.Vector2(j,z),this._basepath=k,this._version=A;var O=x.domElement;O.style.position="absolute";var D=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var o=function(t){return function(e){return e.test(t)}}(i),w={apple:{phone:o(r)&&!o(f),ipod:o(s),tablet:!o(r)&&(o(a)||m(e))&&!o(f),universal:o(h),device:(o(r)||o(s)||o(a)||o(h)||m(e))&&!o(f)},amazon:{phone:o(p),tablet:!o(p)&&o(d),device:o(p)||o(d)},android:{phone:!o(f)&&o(p)||!o(f)&&o(u),tablet:!o(f)&&!o(p)&&!o(u)&&(o(d)||o(c)),device:!o(f)&&(o(p)||o(d)||o(u)||o(c))||o(/\bokhttp\b/i)},windows:{phone:o(f),tablet:o(l),device:o(f)||o(l)},other:{blackberry:o(_),blackberry10:o(y),opera:o(g),firefox:o(b),chrome:o(v),device:o(_)||o(y)||o(g)||o(b)||o(v)},any:!1,phone:!1,tablet:!1};return w.any=w.apple.device||w.android.device||w.windows.device||w.other.device,w.phone=w.apple.phone||w.android.phone||w.windows.phone,w.tablet=w.apple.tablet||w.android.tablet||w.windows.tablet,w}(navigator.userAgent).any,B=new e.Raycaster,C=new e.Vector2,L={type:"",emitted:[],originalEvent:null},S=[],R=[],M=function(t,e,n){L.originalEvent=t,L.emitted=[];var o=O.offsetWidth,r=O.offsetHeight;C.x=e/o*2-1,C.y=-n/r*2+1;for(var s=i._views,a=s.length-1;a>=0;a--){if(L.emitted.length>0)return;s[a].onInteraction(L,B,C)}},G=function(t,e){for(var i=0;i<t.length;i++)t[i].emit(e,L)},V=function(t,e){for(var i=t.concat([]),n=e.concat([]),o=[],r=i.length-1;r>=0;r--){var s=i[r],a=n.indexOf(s);a>-1&&(i.splice(r,1),n.splice(a,1),o.push(s))}return{both:o,first:i,emitted:n}},W=function(t,e,n){S=[],i.interactionDown&&(L.type="system:interaction:pointerdown",M(t,e,n),0!==L.emitted.length&&(G(L.emitted,"pointerdown"),S=L.emitted))},X=function(t,e,n){if(i.interactionMove)if(L.type="system:interaction:pointermove",M(t,e,n),0!==R.length){if(0===L.emitted.length)return G(R,"pointerout"),void(R=[]);var o=V(R,L.emitted);G(o.emitted,"pointerover"),G(o.first,"pointerout"),R=L.emitted,G(o.both,"pointermove")}else L.emitted.length>0&&(G(L.emitted,"pointerover"),R=L.emitted)},H=function(t,e,n){if(i.interactionUp)if(L.type="system:interaction:pointerup",M(t,e,n),0!==S.length){if(0===L.emitted.length)return G(S,"pointerupoutside"),void(S=[]);var o=V(S,L.emitted);G(o.emitted,"pointerup"),G(o.first,"pointerupoutside"),G(o.both,"pointerup"),G(o.both,"pointertap"),S=[]}else L.emitted.length>0&&G(L.emitted,"pointerup")};D?(O.addEventListener("touchstart",(function(t){W(t,t.touches[0].clientX-O.offsetLeft,t.touches[0].clientY-O.offsetTop)})),O.addEventListener("touchmove",(function(t){X(t,t.touches[0].clientX-O.offsetLeft,t.touches[0].clientY-O.offsetTop)})),O.addEventListener("touchend",(function(t){H(t,t.changedTouches[0].clientX-O.offsetLeft,t.changedTouches[0].clientY-O.offsetTop)}))):(O.addEventListener("mousedown",(function(t){W(t,t.offsetX,t.offsetY)})),O.addEventListener("mousemove",(function(t){X(t,t.offsetX,t.offsetY)})),O.addEventListener("mouseup",(function(t){H(t,t.offsetX,t.offsetY)}))),window.addEventListener("visibilitychange",(function(t){i._lastTime=t.timeStamp}));var F=function(t){var e=.06*(t-i._lastTime);i._lastTime=t,i._playing?(i.update(e),requestAnimationFrame(F)):requestAnimationFrame(F)};requestAnimationFrame(F),T&&(this.autoAdjuster=!0===T?function(){i.fullScreen()}:function(){T(i)})},x={element:{configurable:!0},width:{configurable:!0},height:{configurable:!0},autoAdjuster:{configurable:!0}};w.prototype.attachAsync=function(t){var e=this;return t.loadAssetsAsync(this._basepath,this._version).then((function(i){return{width:e._rendererSize.width,height:e._rendererSize.height,resources:i,vars:t.vars}})).then((function(i){for(var n=t.viewClasses,o=0;o<n.length;o++)e.addView(new n[o](i));return e}))},x.element.get=function(){return this._renderer.domElement},x.width.get=function(){return this._rendererSize.x},x.height.get=function(){return this._rendererSize.y},w.prototype.addView=function(t){return this._views.push(t),t},w.prototype.removeView=function(t){var e=this._views.indexOf(t);if(-1!==e)return this._views.splice(e,1),t},w.prototype.play=function(){return this._container.appendChild(this._renderer.domElement),this.start()},w.prototype.start=function(){return this._playing=!0,this},w.prototype.stop=function(){return this._playing=!1,this},w.prototype.update=function(t){for(var e=this._views,i={delta:t},n=0;n<e.length;n++)e[n].update(i);this.render()},w.prototype.render=function(){this._renderer.setViewport(0,0,this._rendererSize.x,this._rendererSize.y),this._renderer.clear();for(var t=this._views,e=0;e<t.length;e++)t[e].render(this._renderer)},x.autoAdjuster.get=function(){return this._autoAdjuster},x.autoAdjuster.set=function(t){this._autoAdjuster&&window.removeEventListener("resize",this._autoAdjuster),t?(this._autoAdjuster=t,window.addEventListener("resize",t),t()):this._autoAdjuster=null},w.prototype.fullScreen=function(t){var e=this._renderer.domElement,i=t||{x:0,y:0,width:this._container.offsetWidth||window.innerWidth,height:this._container.offsetHeight||window.innerHeight};return i.width/i.height>e.width/e.height?this.adjustHeight(i.height).toCenter(i).toTop(i):this.adjustWidth(i.width).toMiddle(i).toLeft(i)},w.prototype.adjustWidth=function(t){var e=this._renderer.domElement,i=t||this._container.offsetWidth||window.innerWidth,n=i/e.width*e.height;return e.style.width=i+"px",e.style.height=n+"px",this},w.prototype.adjustHeight=function(t){var e=this._renderer.domElement,i=t||this._container.offsetHeight||window.innerHeight,n=i/e.height*e.width;return e.style.height=i+"px",e.style.width=n+"px",this},w.prototype.toLeft=function(t){var e=this._renderer.domElement,i=t||{x:0,width:this._container.offsetWidth||window.innerWidth};return e.style.left=i.x+"px",this},w.prototype.toCenter=function(t){var e=this._renderer.domElement,i=t||{x:0,width:this._container.offsetWidth||window.innerWidth};return e.style.left=(i.width-this._getViewRect().width)/2+i.x+"px",this},w.prototype.toRight=function(t){var e=this._renderer.domElement,i=t||{x:0,width:this._container.offsetWidth||window.innerWidth};return e.style.left=i.width-this._getViewRect().width+i.x+"px",this},w.prototype.toTop=function(t){var e=this._renderer.domElement,i=t||{y:0,height:this._container.offsetHeight||window.innerHeight};return e.style.top=i.y+"px",this},w.prototype.toMiddle=function(t){var e=this._renderer.domElement,i=t||{y:0,height:this._container.offsetHeight||window.innerHeight};return e.style.top=(i.height-this._getViewRect().height)/2+i.y+"px",this},w.prototype.toBottom=function(t){var e=this._renderer.domElement,i=t||{y:0,height:this._container.offsetHeight||window.innerHeight};return e.style.top=i.height-this._getViewRect().height+i.y+"px",this},w.prototype._getViewRect=function(){var t=this._renderer.domElement;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(w.prototype,x);var j=function(t){this._object=t},z={x:{configurable:!0},y:{configurable:!0},z:{configurable:!0}};z.x.get=function(){return this._object.body.getPosition().x},z.x.set=function(t){var e=this._object.body.getPosition();e.x=t,this._object.body.setPosition(e),this._object.updateTransform()},z.y.get=function(){return this._object.body.getPosition().y},z.y.set=function(t){var e=this._object.body.getPosition();e.y=t,this._object.body.setPosition(e),this._object.updateTransform()},z.z.get=function(){return this._object.body.getPosition().z},z.z.set=function(t){var e=this._object.body.getPosition();e.z=t,this._object.body.setPosition(e),this._object.updateTransform()},j.prototype.set=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=e);var n=this._object.body.getPosition();n.x=t,n.y=e,n.z=i,this._object.body.setPosition(n),this._object.updateTransform()},Object.defineProperties(j.prototype,z);var P=function(t){this._object=t},E={x:{configurable:!0},y:{configurable:!0},z:{configurable:!0}};E.x.get=function(){return this._object.body.getRotation().toEulerXyz().x},E.x.set=function(t){var e=this._object.body.getRotation().toEulerXyz();e.x=t,this._object.body.setRotationXyz(e),this._object.updateTransform()},E.y.get=function(){return this._object.body.getRotation().toEulerXyz().y},E.y.set=function(t){var e=this._object.body.getRotation().toEulerXyz();e.y=t,this._object.body.setRotationXyz(e),this._object.updateTransform()},E.z.get=function(){return this._object.body.getRotation().toEulerXyz().z},E.z.set=function(t){var e=this._object.body.getRotation().toEulerXyz();e.z=t,this._object.body.setRotationXyz(e),this._object.updateTransform()},P.prototype.set=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=e);var n=this._object.body.getRotation().toEulerXyz();n.x=t,n.y=e,n.z=i,this._object.body.setRotationXyz(n),this._object.updateTransform()},Object.defineProperties(P.prototype,E);
/*!
 * @tawaship/emitter - v3.1.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var T=function(){this._events={}};T.prototype._on=function(t,e,i){if(!t||!e)return this;for(var n=this._events[t]=this._events[t]||[],o=0;o<n.length;o++)if(n[o].callback===e)return this;return n.push({callback:e,once:i}),this},T.prototype.on=function(t,e){return this._on(t,e,!1)},T.prototype.once=function(t,e){return this._on(t,e,!0)},T.prototype.off=function(t,e){if(!t||!e)return this;for(var i=this._events[t]||[],n=0;n<i.length;n++)if(i[n].callback===e)return i.splice(n,1),this;return this},T.prototype._emit=function(t,e){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];if(!t)return this;for(var o=this._events[t]||[],r=[],s=o.length-1;s>=0;s--){var a=o[s];a.once&&o.splice(s,1),r.push(a)}for(var h=r.length-1;h>=0;h--)r[h].callback.apply(e,i);return this},T.prototype.emit=function(t){for(var e,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];return(e=this)._emit.apply(e,[t,this].concat(i))},T.prototype.cemit=function(t,e){for(var i,n=[],o=arguments.length-2;o-- >0;)n[o]=arguments[o+2];return(i=this)._emit.apply(i,[t,e].concat(n))},T.prototype._emitAll=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(null==t)return this;var n=[];for(var o in this._events)for(var r=this._events[o]||[],s=r.length-1;s>=0;s--){var a=r[s];a.once&&r.splice(s,1),n.push(a)}for(var h=n.length-1;h>=0;h--)n[h].callback.apply(t,e);return this},T.prototype.emitAll=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];return(t=this)._emitAll.apply(t,[this].concat(e))},T.prototype.cemitAll=function(t){for(var e,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];return(e=this)._emitAll.apply(e,[t].concat(i))},T.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this};
/*!
 * @tawaship/task - v1.1.0
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var k=function(t,e){this._taskData={context:null==e?this:e,enabled:!0,index:-1,callbacks:[],value:null},this.add(t)},A={enabled:{configurable:!0},value:{configurable:!0}};A.enabled.get=function(){return this._taskData.enabled},A.enabled.set=function(t){this._taskData.enabled=t},k.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var e=this._taskData.callbacks,i=(e.length,0);i<t.length;i++)t[i]instanceof Function&&e.push(t[i]);return this},k.prototype.done=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(this._taskData.enabled){var i=this._taskData.callbacks[this._taskData.index];if(i)return this._taskData.value=i.apply(this._taskData.context,t)}},k.prototype._to=function(t){return this._taskData.index=Number(t),this},k.prototype.first=function(){return this._to(0)},k.prototype.prev=function(){return this._to(this._taskData.index-1)},k.prototype.next=function(){return this._to(this._taskData.index+1)},k.prototype.to=function(t){return this._to(t)},k.prototype.finish=function(){return this._taskData.index=-1,this},k.prototype.reset=function(){return this._taskData.callbacks=[],this._taskData.index=-1,this._taskData.value=null,this},k.prototype.destroy=function(){this.reset()},A.value.get=function(){return this._taskData.value},Object.defineProperties(k.prototype,A);var O=new e.Box3,D=function(t){function i(i){var n=this;t.call(this),this._size=new e.Vector3,this._pivot=new e.Vector3,this._children=[],this.interactive=!1,this._three=this._sub=i,i.addEventListener("system:interaction:pointerdown",(function(t){n.interactive&&t.emitted.push(n)})),i.addEventListener("system:interaction:pointerup",(function(t){n.interactive&&t.emitted.push(n)})),i.addEventListener("system:interaction:pointermove",(function(t){n.interactive&&t.emitted.push(n)})),i.addEventListener("system:interaction:pointerupoutside",(function(t){n.interactive&&t.emitted.push(n)})),this._task=new k([],this),this._task.first()}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var n={three:{configurable:!0},task:{configurable:!0},parent:{configurable:!0},children:{configurable:!0},width:{configurable:!0},height:{configurable:!0},depth:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0}};return n.three.get=function(){return this._three},n.task.get=function(){return this._task},n.parent.get=function(){return this._three.userData.parent},n.children.get=function(){return this._children},i.prototype.updateTask=function(t){this._task.done(t)},n.width.get=function(){return this.updateBoundingBox(),this._size.x},n.height.get=function(){return this.updateBoundingBox(),this._size.y},n.depth.get=function(){return this.updateBoundingBox(),this._size.z*this.scale.z},n.x.get=function(){return this._three.position.x},n.x.set=function(t){this._three.position.x=t},n.y.get=function(){return this._three.position.y},n.y.set=function(t){this._three.position.y=t},n.z.get=function(){return this._three.position.z},n.z.set=function(t){this._three.position.z=t},n.scale.get=function(){return this._three.scale},n.pivot.get=function(){return this._pivot},i.prototype.update=function(t){this.updateTransform(),this.updateTask(t);for(var e=this._children,i=0;i<e.length;i++)e[i].update(t)},i.prototype.updateBoundingBox=function(){this.updateTransform(),this._three.remove(this._sub),O.setFromObject(this._sub),this._three.add(this._sub),O.getSize(this._size),this._size.multiply(this.scale)},i.prototype.addChild=function(t){return t.parent&&t.parent.removeChild(t),this._children.push(t),this._sub.add(t.three),t.three.userData.parent=this,t},i.prototype.removeChild=function(t){if(t.parent===this){var e=this._children.indexOf(t);if(-1!==e)return this._children.splice(e,1),this._sub.remove(t.three),t.three.userData.parent=null,t}},Object.defineProperties(i.prototype,n),i}(T),B=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={rotation:{configurable:!0}};return i.rotation.get=function(){return this._three.rotation},Object.defineProperties(e.prototype,i),e}(D),C=function(t){function e(e,i){t.call(this,e),this._viewport=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={camera:{configurable:!0},viewport:{configurable:!0}};return i.camera.get=function(){return this._three},i.viewport.get=function(){return this._viewport},e.prototype.render=function(t,e){t.setViewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height),t.render(e,this._three)},e.prototype.updateTransform=function(){},e.prototype.updateBoundingBox=function(){},Object.defineProperties(e.prototype,i),e}(B),L=function(t){function i(i){t.call(this,i),this._skew=new e.Vector2,i.matrixAutoUpdate=!1}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var n={skew:{configurable:!0},rotation:{configurable:!0}};return n.skew.get=function(){return this._skew},n.rotation.get=function(){return this._three.rotation.z},n.rotation.set=function(t){this._three.rotation.z=t},i.prototype.updateTransform=function(){this._updateMatrix()},i.prototype._updateMatrix=function(){var t=this.x,e=this.y,i=this._three.position.z,n=this.scale.x,o=this.scale.y,r=this.skew.x,s=this.skew.y,a=this.rotation,h=this.pivot.x,u=this.pivot.y,c=Math.cos(a+s)*n,p=Math.sin(a+s)*n,d=-Math.sin(a-r)*o,f=Math.cos(a-r)*o,l=t-(h*c+u*d),_=e-(h*p+u*f);this._three.matrix.set(c,d,0,l,p,f,0,_,0,0,1,i,0,0,0,1)},Object.defineProperties(i.prototype,n),i}(D),S=function(t){function i(){t.call(this,new e.Group),this._sub=new e.Group,this._three.add(this._sub)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._updateOrder=function(){for(var t=this._children,e=0;e<t.length;e++)t[e].three.position.z=1e-7*e},i.prototype.updateTransform=function(){this._updateMatrix()},i}(L),R=function(t){function i(){t.call(this,new e.Group),this._sub=new e.Group,this._three.add(this._sub)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.updateTransform=function(){this._sub.position.x=-this._pivot.x,this._sub.position.y=-this._pivot.y,this._sub.position.z=-this._pivot.z},i}(B);function M(t,e){return 0===t.indexOf("http://")||0===t.indexOf("https://")||0===t.indexOf("//")||0===t.indexOf("/")?t:e.replace(/^(.+)\/$/,"$1")+"/"+t}function G(t,e){return e?t+(t.match(/\?/)?"&":"?")+"_fv="+e:t}function V(t,i,n){var o=new e.TextureLoader,r=[],s={},a=function(e){r.push(new Promise((function(r,a){var h=G(M(t[e],i),n);o.load(h,(function(t){s[e]=t,r()}),void 0,(function(t){a(t)}))})))};for(var h in t)a(h);return Promise.all(r).then((function(){return s}))}function W(t,e,n){var o=new i.GLTFLoader,r=[],s={},a=function(i){r.push(new Promise((function(r,a){var h=G(M(t[i],e),n);o.load(h,(function(t){s[i]=t,r()}),void 0,(function(t){a(t)}))})))};for(var h in t)a(h);return Promise.all(r).then((function(){return s}))}var X={},H=function(){this._assetDefines={},this._viewClasses=[],this._vars={}},F={viewClasses:{configurable:!0},vars:{configurable:!0}};F.viewClasses.get=function(){return this._viewClasses},F.vars.get=function(){return Object.assign({},this._vars)},H.prototype.defineAssets=function(t,e){for(var i in this._assetDefines[t]=this._assetDefines[t]||{},e)this._assetDefines[t][i]=e[i]},H.prototype.defineTextures=function(t){this.defineAssets("textures",t)},H.prototype.defineGLBs=function(t){this.defineAssets("glbs",t)},H.prototype.loadAssetsAsync=function(t,e){var i=this,n=[],o={},r=function(r){r in X&&n.push(X[r](i._assetDefines[r],t,e).then((function(t){return o[r]=t})))};for(var s in i._assetDefines)r(s);return Promise.all(n).then((function(){return o}))},H.prototype.setView=function(t){this._viewClasses.push(t)},H.prototype.addVars=function(t){for(var e in t)this._vars[e]=t[e]},H.registerLoader=function(t,e){X[t]=e},Object.defineProperties(H.prototype,F),H.registerLoader("textures",V),H.registerLoader("glbs",W);var I=function(t){function i(i,o){t.call(this,new e.Mesh(i,o)),this._anchor=new n(0,0,0,this),o.transparent=!0,this.updateGeometryPosition()}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var o={anchor:{configurable:!0}};return o.anchor.get=function(){return this._anchor},i.prototype.updateGeometryPosition=function(){this._three.geometry.center(),this.updateBoundingBox(),this._three.geometry.translate(this._size.x*(.5-this._anchor.x),this._size.y*(.5-this._anchor.y),this._size.z*(.5-this._anchor.z))},i.prototype.updateBoundingBox=function(){this._three.geometry.computeBoundingBox(),this._three.geometry.boundingBox&&this._three.geometry.boundingBox.getSize(this._size),this._size.multiply(this.scale)},i.prototype.updateTransform=function(){},Object.defineProperties(i.prototype,o),i}(B),Y=OIMO,U=function(t){function e(e,i){t.call(this,e),this._contantEnabled=!1,this._body=i,this._position=new j(this),this._rotation=new P(this),i.userData={},i.userData.ref=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={body:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},position:{configurable:!0},rotation:{configurable:!0},contactEnabled:{configurable:!0}};return i.body.get=function(){return this._body},i.x.get=function(){return this._position.x},i.x.set=function(t){this._position.x=t},i.y.get=function(){return this._position.y},i.y.set=function(t){this._position.y=t},i.z.get=function(){return this._position.z},i.z.set=function(t){this._position.z=t},i.position.get=function(){return this._position},i.rotation.get=function(){return this._rotation},i.contactEnabled.get=function(){return this._contantEnabled},i.contactEnabled.set=function(t){var e=this;if(this._contantEnabled=t,t){var i=new Y.ContactCallback,n={hit:null,originalEvent:null};i.beginContact=function(t){n.hit=t.getShape2().getRigidBody().userData.ref,n.originalEvent=t,e.emit("beginContact",n)},i.endContact=function(t){n.hit=t.getShape2().getRigidBody().userData.ref,n.originalEvent=t,e.emit("endContact",n)},i.preSolve=function(t){n.hit=t.getShape2().getRigidBody().userData.ref,n.originalEvent=t,e.emit("preSolve",n)},i.postSolve=function(t){n.hit=t.getShape2().getRigidBody().userData.ref,n.originalEvent=t,e.emit("postSolve",n)};for(var o=this._body.getShapeList();o;)o.setContactCallback(i),o=o.getNext()}else for(var r=this._body.getShapeList();r;)r.setContactCallback(null),r=r.getNext()},e.prototype.updateTransform=function(){this._three.position.copy(this._body.getPosition()),this._three.quaternion.copy(this._body.getOrientation())},e.prototype.updateBoundingBox=function(){},Object.defineProperties(e.prototype,i),e}(B),q=function(t){function i(i){t.call(this,new e.Scene),this._cameras=[],this.interactive=!0}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var n={scene:{configurable:!0}};return n.scene.get=function(){return this._three},i.prototype.addCamera=function(t){return t.parent&&t.parent.removeChild(t),this._cameras.push(t),this._three.add(t.three),t.three.userData.parent=this,t},i.prototype.removeCamera=function(t){if(t.parent===this){var e=this._cameras.indexOf(t);if(-1!==e)return this._cameras.splice(e,1),this._three.remove(t.three),t.three.userData.parent=null,t}},i.prototype.add=function(t){return this._three.add(t),t},i.prototype.remove=function(t){return this._three.remove(t),t},i.prototype.update=function(t){this.updateTask(t);var e=this._children;for(var i in this._children)e[i].update(t)},i.prototype.render=function(t){for(var e=this._cameras,i=0;i<e.length;i++)t.clearDepth(),e[i].render(t,this._three)},i.prototype.onInteraction=function(t,i,n){var o=this;if(this.interactive)for(var r=this._cameras,s=function(s){if(t.emitted.length>0)return{};i.setFromCamera(n,r[s].camera);for(var a=function(t){return t.children.map((function(t){return t instanceof e.Mesh?t:a(t)})).flat()},h=a(o._three),u=i.intersectObjects(h),c=0;c<u.length;c++){if(t.emitted.length>0)return;for(var p=u[c].object;p!==o._three&&(p.dispatchEvent(t),p.parent);)p=p.parent}},a=0;a<r.length;a++){var h=s(a);if(h)return h.v}},i.prototype.updateTransform=function(){},Object.defineProperties(i.prototype,n),i}(B),N=function(t){function e(){t.call(this),this.physicsEnabled=!0,this._world=new Y.World,this._world.setGravity(new Y.Vec3(0,-9.8,0))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={world:{configurable:!0}};return i.world.get=function(){return this._world},e.prototype.addChild=function(e){return t.prototype.addChild.call(this,e),this._world.addRigidBody(e.body),e},e.prototype.removeChild=function(e){var i=t.prototype.removeChild.call(this,e);if(i)return this._world.removeRigidBody(e.body),i},e.prototype.update=function(t){this.physicsEnabled&&this._world.step(1/60),this.updateTask(t);var e=this._children;for(var i in this._children)e[i].update(t)},Object.defineProperties(e.prototype,i),e}(q),$=function(t){function i(i){t.call(this,new e.Mesh),this._width=0,this._height=0,this._anchor=new n(0,0,0,this),this._material=new e.MeshBasicMaterial,this._material.transparent=!0,this._three.material=this._material,this._texture=i,this.texture=i}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var o={texture:{configurable:!0},anchor:{configurable:!0}};return o.texture.get=function(){return this._texture},o.texture.set=function(t){this._texture=t,this._material.needsUpdate=!0,this._material.map=t,t&&t.image?this._updateGeometry(t.image.width,t.image.height):this._updateGeometry(0,0)},o.anchor.get=function(){return this._anchor},i.prototype._updateGeometry=function(t,i){this._three.geometry=new e.PlaneGeometry(t,i),this._width=t,this._height=i,this.updateGeometryPosition()},i.prototype.updateGeometryPosition=function(){this._three.geometry.center(),this._three.geometry.translate(this._width*(.5-this._anchor.x),this._height*(.5-this._anchor.y),0)},i.prototype.updateBoundingBox=function(){this._three.geometry.computeBoundingBox(),this._three.geometry.boundingBox&&this._three.geometry.boundingBox.getSize(this._size),this._size.multiply(this.scale)},i.prototype.updateTransform=function(){},i.from=function(t,n){var o=new i((new e.TextureLoader).load(t,(function(t){o.texture=t,n&&n(o)})));return o},Object.defineProperties(i.prototype,o),i}(L);t.Anchor=n,t.Application=w,t.BodyPosition=j,t.BodyRotation=P,t.Camera=C,t.Container2D=S,t.Container3D=R,t.Content=H,t.DisplayObject=D,t.Mesh=I,t.Object2D=L,t.Object3D=B,t.PhysicsObject3D=U,t.PhysicsView=N,t.Sprite=$,t.View=q,t.loadGLTFsAsync=W,t.loadTexturesAsync=V,t.resolvePath=M,t.resolveVersion=G}(this.TLAP=this.TLAP||{},THREE,{GLTFLoader:THREE.GLTFLoader});//# sourceMappingURL=tlap.min.js.map
